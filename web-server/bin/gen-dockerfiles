#!/usr/bin/env php
<?php
/**
 * Generate the Docker files for building of the nginx images.
 */

if (in_array('-h', $argv, true) || in_array('--help', $argv, true)) {
	$binary = basename(__FILE__);
	exit("{$binary}\nGenerate the Dockerfiles for building of the nginx images.\n\nUSAGE:\n    {$binary} [FLAGS]\n\nFLAGS:\n    -h, --help       Prints help information\n\n");
}

chdir(__DIR__ . '/..');

$config = parse_ini_file('config/docker/config.ini', true);

foreach (['', '-debug'] as $suffix) {
	$debug = (bool) $suffix;
	ob_start();
	require __DIR__ . '/../config/docker/dockerfile.tpl.php';
	file_put_contents("Dockerfile.web-server{$suffix}", ob_get_clean());
}
